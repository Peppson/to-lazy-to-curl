<UserControl
    x:Class="to_lazy_to_curl.Components.EditorInput"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:fa="http://schemas.fontawesome.io/icons/"
    xmlns:local="clr-namespace:to_lazy_to_curl.Components"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <!--  Background Icon  -->
        <Grid
            Panel.ZIndex="1"
            ClipToBounds="True"
            IsHitTestVisible="False">
            <fa:ImageAwesome
                Width="24"
                Height="24"
                Margin="10"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Foreground="{DynamicResource PrimaryText}"
                Icon="Terminal"
                Opacity="0.14" />
        </Grid>

        <!--  Single View  -->
        <Grid
            x:Name="SingleView"
            Margin="-1,0,-1,0"
            Panel.ZIndex="0"
            SnapsToDevicePixels="True">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0" Panel.ZIndex="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MaxWidth="161" />
                        <ColumnDefinition MaxWidth="160" />
                        <ColumnDefinition MaxWidth="160" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <!--  Payload  -->
                    <Button
                        x:Name="PayloadButton"
                        Grid.Column="0"
                        Margin="1,0,1,-1"
                        Click="PayloadButton_Click"
                        Cursor="Hand"
                        FontSize="{StaticResource FontSizeTabs}"
                        FontWeight="Bold">

                        <StackPanel Orientation="Horizontal">
                            <fa:ImageAwesome
                                Width="14"
                                Height="14"
                                Margin="0,0,6,0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource Icons}"
                                Icon="Upload" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="{StaticResource FontSizeTabs}"
                                Text="Payload" />
                        </StackPanel>

                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border
                                    x:Name="border"
                                    Background="{DynamicResource UrlInputBackground}"
                                    BorderBrush="{DynamicResource EditorBorder}"
                                    BorderThickness="0,1,0,0"
                                    CornerRadius="6,6,0,0">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderHover}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <!--  Response  -->
                    <Button
                        x:Name="ResponseButton"
                        Grid.Column="1"
                        Margin="0,0,1,-1"
                        Click="ResponseButton_Click"
                        Cursor="Hand"
                        FontSize="{StaticResource FontSizeTabs}"
                        FontWeight="Bold">

                        <StackPanel Orientation="Horizontal">
                            <fa:ImageAwesome
                                Width="14"
                                Height="14"
                                Margin="0,0,6,0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource Icons}"
                                Icon="Download" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="{StaticResource FontSizeTabs}"
                                Text="Response" />
                        </StackPanel>

                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border
                                    x:Name="border"
                                    Background="{DynamicResource UrlInputBackground}"
                                    BorderBrush="{DynamicResource EditorBorder}"
                                    BorderThickness="0,1,0,0"
                                    CornerRadius="6,6,0,0">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderHover}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <!--  Header  -->
                    <Button
                        x:Name="HeaderButton"
                        Grid.Column="2"
                        Margin="0,0,1,-1"
                        Click="HeaderButton_Click"
                        Cursor="Hand"
                        FontSize="{StaticResource FontSizeTabs}"
                        FontWeight="Bold">

                        <StackPanel Orientation="Horizontal">
                            <fa:ImageAwesome
                                Width="14"
                                Height="14"
                                Margin="0,0,6,0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource Icons}"
                                Icon="FileTextOutline" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="{StaticResource FontSizeTabs}"
                                Text="Headers" />
                        </StackPanel>

                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border
                                    x:Name="border"
                                    Background="{DynamicResource UrlInputBackground}"
                                    BorderBrush="{DynamicResource EditorBorder}"
                                    BorderThickness="0,1,0,0"
                                    CornerRadius="6,6,0,0">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderHover}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>

                <!--  Editors  -->
                <Border
                    Grid.Row="1"
                    Background="{DynamicResource EditorsBackground}"
                    BorderBrush="{DynamicResource EditorBorder}"
                    BorderThickness="1"
                    CornerRadius="0,6,6,6">
                    <Grid>
                        <avalonEdit:TextEditor
                            Name="PayloadEditor1"
                            Panel.ZIndex="0"
                            Background="Transparent"
                            BorderBrush="{DynamicResource EditorBorder}"
                            FontSize="{StaticResource FontSizeJsonEditor}"
                            Foreground="{DynamicResource EditorCaretColor}"
                            ShowLineNumbers="True"
                            SyntaxHighlighting="{Binding PayloadEditorSyntax, RelativeSource={RelativeSource AncestorType=UserControl}}"
                            VerticalScrollBarVisibility="Auto"
                            WordWrap="True" />

                        <avalonEdit:TextEditor
                            Name="ResponseEditor1"
                            Panel.ZIndex="0"
                            Background="Transparent"
                            BorderBrush="{DynamicResource EditorBorder}"
                            FontSize="{StaticResource FontSizeJsonEditor}"
                            Foreground="{DynamicResource EditorCaretColor}"
                            ShowLineNumbers="True"
                            SyntaxHighlighting="{Binding ResponseEditorSyntax, RelativeSource={RelativeSource AncestorType=UserControl}}"
                            VerticalScrollBarVisibility="Auto"
                            WordWrap="True" />

                        <avalonEdit:TextEditor
                            Name="HeaderEditor1"
                            Panel.ZIndex="0"
                            Background="Transparent"
                            FontSize="{StaticResource FontSizeJsonEditor}"
                            Foreground="{DynamicResource EditorCaretColor}"
                            ShowLineNumbers="True"
                            SyntaxHighlighting="Json"
                            VerticalScrollBarVisibility="Auto"
                            WordWrap="True" />
                    </Grid>
                </Border>
            </Grid>
        </Grid>

        <!--  Split View  -->
        <Grid x:Name="SplitView" SnapsToDevicePixels="True">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" MinWidth="160" />
                <ColumnDefinition Width="0" />
                <ColumnDefinition Width="*" MinWidth="178" />
                <ColumnDefinition Width="0" />
                <ColumnDefinition Width="*" MinWidth="178" />
            </Grid.ColumnDefinitions>

            <!--  Payload Container  -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="159" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button
                        x:Name="SplitPayloadButton"
                        Grid.Column="0"
                        Click="PayloadButtonSplit_Click"
                        Cursor="Hand"
                        FontSize="{StaticResource FontSizeTabs}"
                        FontWeight="Bold">
                        <StackPanel Orientation="Horizontal">
                            <fa:ImageAwesome
                                Width="14"
                                Height="14"
                                Margin="0,1,6,0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource Icons}"
                                Icon="Upload" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="{StaticResource FontSizeTabs}"
                                Text="Payload" />
                        </StackPanel>

                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border
                                    x:Name="border"
                                    Background="{DynamicResource EditorsBackground}"
                                    BorderBrush="{DynamicResource EditorBorder}"
                                    BorderThickness="0,1,0,0"
                                    CornerRadius="6,6,0,0">
                                    <Grid x:Name="innerArea" Background="Transparent">
                                        <ContentPresenter
                                            x:Name="contentPresenter"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            RecognizesAccessKey="True"
                                            TextElement.Foreground="{TemplateBinding Foreground}" />
                                    </Grid>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderHover}" />
                                    </Trigger>

                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Grid Grid.Column="1" Background="Transparent" />
                </Grid>

                <!--  Editor  -->
                <Border
                    Grid.Row="1"
                    Background="{DynamicResource EditorsBackground}"
                    CornerRadius="0,0,0,6">

                    <avalonEdit:TextEditor
                        Name="PayloadEditor2"
                        Background="Transparent"
                        BorderBrush="{DynamicResource EditorBorder}"
                        BorderThickness="0,1,0,0"
                        FontSize="{StaticResource FontSizeJsonEditor}"
                        Foreground="{DynamicResource EditorCaretColor}"
                        GotKeyboardFocus="PayloadButtonSplit_GotKeyboardFocus"
                        ShowLineNumbers="True"
                        SnapsToDevicePixels="True"
                        SyntaxHighlighting="{Binding PayloadEditorSyntax, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        VerticalScrollBarVisibility="Visible"
                        WordWrap="True" />
                </Border>
            </Grid>

            <GridSplitter
                x:Name="Splitter1"
                Grid.Column="1"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                DragIncrement="1"
                Focusable="False"
                ResizeDirection="Columns"
                ShowsPreview="False"
                SnapsToDevicePixels="True" />

            <!--  Response Container  -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="17,0,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="159" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button
                        x:Name="SplitResponseButton"
                        Grid.Column="0"
                        Cursor="SizeWE"
                        FontSize="{StaticResource FontSizeTabs}"
                        FontWeight="Bold"
                        PreviewMouseLeftButtonDown="ResponseButtonSplit_PreviewMouseLeftButtonDown">

                        <StackPanel Orientation="Horizontal">
                            <fa:ImageAwesome
                                Width="14"
                                Height="14"
                                Margin="0,0,6,0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource Icons}"
                                Icon="Download" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="{StaticResource FontSizeTabs}"
                                Text="Response" />
                        </StackPanel>

                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border
                                    x:Name="border"
                                    Background="{DynamicResource EditorsBackground}"
                                    BorderBrush="{DynamicResource EditorBorder}"
                                    BorderThickness="0,1,0,0"
                                    CornerRadius="6,6,0,0">
                                    <Grid x:Name="innerArea" Background="Transparent">
                                        <ContentPresenter
                                            x:Name="contentPresenter"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            RecognizesAccessKey="True"
                                            TextElement.Foreground="{TemplateBinding Foreground}" />
                                    </Grid>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderHover}" />
                                    </Trigger>
                                    <DataTrigger Binding="{Binding IsMouseCaptureWithin, ElementName=Splitter1}" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderHover}" />
                                    </DataTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Grid Grid.Column="1" Background="Transparent" />
                </Grid>

                <!--  Editor  -->
                <Border Grid.Row="1" Background="{DynamicResource EditorsBackground}">

                    <avalonEdit:TextEditor
                        Name="ResponseEditor2"
                        Background="Transparent"
                        BorderBrush="{DynamicResource EditorBorder}"
                        BorderThickness="0,1,0,0"
                        FontSize="{StaticResource FontSizeJsonEditor}"
                        Foreground="{DynamicResource EditorCaretColor}"
                        GotKeyboardFocus="ResponseButtonSplit_GotKeyboardFocus"
                        ShowLineNumbers="True"
                        SnapsToDevicePixels="True"
                        SyntaxHighlighting="{Binding ResponseEditorSyntax, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        VerticalScrollBarVisibility="Visible"
                        WordWrap="True" />
                </Border>
            </Grid>

            <GridSplitter
                x:Name="Splitter2"
                Grid.Column="3"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                DragIncrement="1"
                Focusable="False"
                ResizeDirection="Columns"
                ShowsPreview="False"
                SnapsToDevicePixels="True" />

            <!--  Header Container  -->
            <Grid Grid.Column="4">
                <Grid.RowDefinitions>
                    <RowDefinition Height="30" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Margin="17,0,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="159" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button
                        x:Name="SplitHeaderButton"
                        Grid.Column="0"
                        Cursor="SizeWE"
                        FontSize="{StaticResource FontSizeTabs}"
                        FontWeight="Bold"
                        PreviewMouseLeftButtonDown="HeaderButtonSplit_PreviewMouseLeftButtonDown">

                        <StackPanel Orientation="Horizontal">
                            <fa:ImageAwesome
                                Width="14"
                                Height="14"
                                Margin="0,0,6,0"
                                VerticalAlignment="Center"
                                Foreground="{DynamicResource Icons}"
                                Icon="FileTextOutline" />
                            <TextBlock
                                VerticalAlignment="Center"
                                FontSize="{StaticResource FontSizeTabs}"
                                Text="Headers" />
                        </StackPanel>

                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border
                                    x:Name="border"
                                    Background="{DynamicResource EditorsBackground}"
                                    BorderBrush="{DynamicResource EditorBorder}"
                                    BorderThickness="0,1,0,0"
                                    CornerRadius="6,6,0,0">
                                    <Grid x:Name="innerArea" Background="Transparent">
                                        <ContentPresenter
                                            x:Name="contentPresenter"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            RecognizesAccessKey="True"
                                            TextElement.Foreground="{TemplateBinding Foreground}" />
                                    </Grid>
                                </Border>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderHover}" />
                                    </Trigger>
                                    <DataTrigger Binding="{Binding IsMouseCaptureWithin, ElementName=Splitter2}" Value="True">
                                        <Setter TargetName="border" Property="BorderBrush" Value="{DynamicResource BorderHover}" />
                                    </DataTrigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    <Grid Grid.Column="1" Background="Transparent" />
                </Grid>

                <!--  Editor  -->
                <Border
                    Grid.Row="1"
                    Background="{DynamicResource EditorsBackground}"
                    BorderThickness="0,0,1,0"
                    CornerRadius="0,6,6,0">

                    <avalonEdit:TextEditor
                        Name="HeaderEditor2"
                        Background="Transparent"
                        BorderBrush="{DynamicResource EditorBorder}"
                        BorderThickness="0,1,0,0"
                        FontSize="{StaticResource FontSizeJsonEditor}"
                        Foreground="{DynamicResource EditorCaretColor}"
                        GotKeyboardFocus="HeaderButtonSplit_GotKeyboardFocus"
                        ShowLineNumbers="True"
                        SnapsToDevicePixels="True"
                        SyntaxHighlighting="Json"
                        VerticalScrollBarVisibility="Visible"
                        WordWrap="True" />
                </Border>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
